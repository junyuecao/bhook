<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="16dp"
    android:background="#F5F5F5">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">

        <!-- 标题 -->
        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="🌐 SoHook Web 监控测试"
            android:textSize="24sp"
            android:textStyle="bold"
            android:textColor="#333333"
            android:gravity="center"
            android:layout_marginBottom="24dp"/>

        <!-- Web 服务器控制卡片 -->
        <androidx.cardview.widget.CardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="16dp"
            android:elevation="4dp">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:padding="16dp">

                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="📡 Web 服务器"
                    android:textSize="18sp"
                    android:textStyle="bold"
                    android:textColor="#333333"
                    android:layout_marginBottom="12dp"/>

                <TextView
                    android:id="@+id/tv_server_status"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="状态: 未启动 ⭕"
                    android:textSize="14sp"
                    android:textColor="#666666"
                    android:layout_marginBottom="8dp"/>

                <TextView
                    android:id="@+id/tv_server_url"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="访问地址: -"
                    android:textSize="14sp"
                    android:textColor="#666666"
                    android:layout_marginBottom="12dp"/>

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal">

                    <Button
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:text="启动服务器"
                        android:onClick="onStartWebServerClick"
                        android:layout_marginEnd="8dp"/>

                    <Button
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:text="停止服务器"
                        android:onClick="onStopWebServerClick"
                        android:layout_marginStart="8dp"/>
                </LinearLayout>

                <Button
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="📋 复制地址"
                    android:onClick="onCopyUrlClick"
                    android:layout_marginTop="8dp"/>

            </LinearLayout>
        </androidx.cardview.widget.CardView>

        <!-- 内存监控控制卡片 -->
        <androidx.cardview.widget.CardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="16dp"
            android:elevation="4dp">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:padding="16dp">

                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="🔍 内存监控"
                    android:textSize="18sp"
                    android:textStyle="bold"
                    android:textColor="#333333"
                    android:layout_marginBottom="12dp"/>

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal">

                    <Button
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:text="开始监控"
                        android:onClick="onStartHookClick"
                        android:layout_marginEnd="8dp"/>

                    <Button
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:text="停止监控"
                        android:onClick="onStopHookClick"
                        android:layout_marginStart="8dp"/>
                </LinearLayout>

            </LinearLayout>
        </androidx.cardview.widget.CardView>

        <!-- 测试操作卡片 -->
        <androidx.cardview.widget.CardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="16dp"
            android:elevation="4dp">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:padding="16dp">

                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="🧪 测试操作"
                    android:textSize="18sp"
                    android:textStyle="bold"
                    android:textColor="#333333"
                    android:layout_marginBottom="12dp"/>

                <Button
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="⚠️ 创建内存泄漏 (10 个)"
                    android:onClick="onCreateLeakClick"
                    android:layout_marginBottom="8dp"/>

                <Button
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="🔄 重置统计"
                    android:onClick="onResetStatsClick"/>

            </LinearLayout>
        </androidx.cardview.widget.CardView>

        <!-- 统计信息卡片 -->
        <androidx.cardview.widget.CardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:elevation="4dp">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:padding="16dp">

                <TextView
                    android:id="@+id/tv_stats"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="📊 内存统计\n\n等待开始监控..."
                    android:textSize="14sp"
                    android:textColor="#333333"
                    android:fontFamily="monospace"/>

            </LinearLayout>
        </androidx.cardview.widget.CardView>

        <!-- 使用说明 -->
        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="💡 使用说明：\n\n1. 点击「启动服务器」启动 Web 服务\n2. 点击「复制地址」复制服务器地址\n3. 在电脑浏览器中打开 Web Dashboard\n4. 输入服务器地址并连接\n5. 点击「开始监控」开始内存监控\n6. 点击「创建内存泄漏」测试功能\n7. 在 Web 界面实时查看内存数据"
            android:textSize="12sp"
            android:textColor="#666666"
            android:lineSpacingMultiplier="1.2"
            android:layout_marginTop="16dp"
            android:padding="12dp"
            android:background="#E8F5E9"/>

    </LinearLayout>
</ScrollView>
